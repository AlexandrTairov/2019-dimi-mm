<!DOCTYPE html>

<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="fonts/font-awesome.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="css/bootstrap-select.min.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <link rel="stylesheet" href="css/user.style.css" type="text/css">

    <title>Spotter - Universal Directory Listing HTML Template</title>

</head>

<body onunload="" class="page-subpage page-listing-grid navigation-off-canvas" id="page-top">

<!-- Outer Wrapper-->
<div id="outer-wrapper">
    <!-- Inner Wrapper -->
    <div id="inner-wrapper">
        <!-- Navigation-->
        <div class="header">
            <div class="wrapper">
                <div class="brand">
                    <a href="index-directory.html"><img src="icons/logo.png" alt="logo" width="64px"></a>
                </div>
                <nav class="navigation-items">
                    <div class="wrapper">
                        <ul class="main-navigation navigation-top-header"></ul>
                        <ul class="user-area">
                            <li><a href="sign-in.html">Sign In</a></li>
                            <li><a href="/registration"><strong>Register</strong></a></li>
                        </ul>
                        <a href="submit.html" class="submit-item">
                            <div class="content"><span>Submit Your Item</span></div>
                            <div class="icon">
                                <i class="fa fa-plus"></i>
                            </div>
                        </a>
                    </div>
                </nav>
            </div>
        </div>
        <!-- end Navigation-->
        <!-- Page Canvas-->
        <div id="page-canvas">

            <!--Page Content-->
            <div id="page-content">
                <section class="container">
                    <div class="row">
                        <!--Content-->оо, и что долж
                        <div class="col-md-7">
                            <header>
                                <h1 class="page-title">Все события</h1>
                            </header>
                            <figure class="filter clearfix">
                                <div class="buttons pull-left">
                                    <a href="listing-grid.html" class="btn icon active"><i class="fa fa-th"></i>Карта</a>
                                    <a href="listing-list.html" class="btn icon active"><i class="fa fa-th-list"></i>Список</a>
                                </div>
                                <div class="pull-right">
                                    <aside class="sorting">
                                        <span>Sorting</span>
                                        <div class="form-group">
                                            <select class="framed" name="sort">
                                                <option value="">Date - Newest First</option>
                                                <option value="1">Date - Oldest First</option>
                                            </select>
                                        </div>
                                        <!-- /.form-group -->
                                    </aside>
                                </div>
                            </figure>

                            <!--Listing List-->
                            <section class="block listing">

                            </section>
                            <!--end Listing List-->
                            <!--Pagination-->
                            <nav>
                                <ul class="pagination pull-right">
                                    <li class="active"><a href="#">1</a></li>
                                    <li><a href="#">2</a></li>
                                    <li><a href="#">3</a></li>
                                    <li><a href="#" class="previous"><i class="fa fa-angle-left"></i></a></li>
                                    <li><a href="#" class="next"><i class="fa fa-angle-right"></i></a></li>
                                </ul>
                            </nav>
                            <!--end Pagination-->
                        </div>
                        <!--Sidebar-->
                        <div class="col-md-3 col-sm-4">
                            <aside id="sidebar">
                                <section>
                                    <form role="form" action="?" method="post" class="background-color-white">
                                        <header><h2>Your Search</h2></header>
                                        <div class="form-group">
                                            <select class="custom-select custom-select-lg mb-3 js-city">
                                                <option value="">Open this select menu</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="keyword">Поиск по слову</label>
                                            <input type="text" class="form-control" id="keyword">
                                        </div>

                                        <!-- /.form-group -->
                                        <div id="checkboxes" class="js-event-types">
                                            <label>Выберите тип события</label>
                                        </div>
                                        <div class="form-group">
                                            <button type="submit" class="btn btn-default">Search Now</button>
                                        </div>
                                        <!-- /.form-group -->
                                    </form>
                                    <!-- /.form-->
                                </section>

                            </aside>
                            <!-- /#sidebar-->
                        </div>
                        <!-- /.col-md-3-->
                        <!--end Sidebar-->
                    </div>
                </section>
            </div>
            <!-- end Page Content-->
        </div>
        <!-- end Page Canvas-->
        <!--Page Footer-->
        <footer id="page-footer">
            <div class="inner">
                <div class="footer-top">
                    <div class="container">
                        <div class="row">

                            <div class="col-md-4 col-sm-6">
                                <section>
                                    <h2>About Us</h2>
                                    <address>
                                        <div>Max Five Lounge</div>
                                        <div>63 Birch Street</div>
                                        <div>Granada Hills, CA 91344</div>
                                        <figure>
                                            <div class="info">
                                                <i class="fa fa-mobile"></i>
                                                <span>818-832-5258</span>
                                            </div>
                                            <div class="info">
                                                <i class="fa fa-phone"></i>
                                                <span>+1 123 456 789</span>
                                            </div>
                                            <div class="info">
                                                <i class="fa fa-globe"></i>
                                                <a href="#">www.maxfivelounge.com</a>
                                            </div>
                                        </figure>
                                    </address>
                                    <div class="social">
                                        <a href="#" class="social-button"><i class="fa fa-twitter"></i></a>
                                        <a href="#" class="social-button"><i class="fa fa-facebook"></i></a>
                                        <a href="#" class="social-button"><i class="fa fa-pinterest"></i></a>
                                    </div>

                                    <a href="contact.html" class="btn framed icon">Contact Us<i class="fa fa-angle-right"></i></a>
                                </section>
                            </div>
                            <!--/.col-md-4-->
                        </div>
                        <!--/.row-->
                    </div>
                    <!--/.container-->
                </div>
                <!--/.footer-top-->
                <div class="footer-bottom">
                    <div class="container">
                        <span class="left">(C) ThemeStarz, All rights reserved</span>
                        <span class="right">
                                <a href="#page-top" class="to-top roll"><i class="fa fa-angle-up"></i></a>
                            </span>
                    </div>
                </div>
                <!--/.footer-bottom-->
            </div>
        </footer>
        <!--end Page Footer-->
    </div>
    <!-- end Inner Wrapper -->
</div>
<!-- end Outer Wrapper-->
<script>

    (function () {
        const SERVER_URL = "http://localhost:8080";

        const list = document.querySelector('section.block.listing');
        const selectEventType = document.querySelector('.js-event-types');
        const selectCity = document.querySelector('.js-city');

        fetch(`${SERVER_URL}/api/events/`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json;charset=utf-8'
            }
        })
            .then(res => res.json())
            .then(res => {
                res.forEach(function (element) {
                    const node = ' <div class="item list">' +
                        '        <div class="wrapper">' +
                        '            <a href="item-detail.html"><h3 id="name">' + element.name + '</h3></a>' +
                        '            <figure id="address">' + element.address +   '</figure>' +
                        '            <div class="info">' +
                        '                <div class="type">' +
                        '                    <span id="type">' + element.description + '</span>' +
                        '                </div>' +
                        '                <div class="rating" data-rating="3"></div>' +
                        '            </div>' +
                        '        </div>' +
                        '    </div>';
                    list.insertAdjacentHTML("beforeend",node);
                })
            })
            .catch(error => alert(error));

        fetch(`${SERVER_URL}/api/event-types/`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json;charset=utf-8'
            }
        })
            .then(res => res.json())
            .then(res => {
                res.forEach(function (element) {
                    const node = '<div class="checkbox">  <label>' +
                        '<input type="checkbox">' + element.type +
                        '</label> </div>';
                    selectEventType.insertAdjacentHTML("beforeend",node);
                })
            })
            .catch(error => alert(error));

        fetch(`${SERVER_URL}/api/cities/`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json;charset=utf-8'
            }
        })
            .then(res => res.json())
            .then(res => {
                res.forEach(function (element) {
                    const node = '<option value="'+ element.id + '">'+ element.name + '</option>';
                    selectCity.insertAdjacentHTML("beforeend",node);
                })
            })
            .catch(error => alert(error));

    }())
</script>

<script type="text/javascript" src="js/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="js/before.load.js"></script>
<script type="text/javascript" src="js/jquery-migrate-1.2.1.min.js"></script>
<script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/smoothscroll.js"></script>
<script type="text/javascript" src="js/bootstrap-select.min.js"></script>
<script type="text/javascript" src="js/icheck.min.js"></script>
<script type="text/javascript" src="js/jquery.hotkeys.js"></script>
<!--<script type="text/javascript" src="js/custom.js"></script>-->

</body>
</html>